import{ax as A,d as X,i as Z,az as V,aj as _,e as r,a as B,av as x,ao as R,aO as j,ay as Y,af as ee,o as w,c as W,I as q,a5 as te,aL as le,g as M,H as S,ad as O,T as ae,r as F,f as J,j as D,W as se,aq as oe,aW as p,bf as U,w as G,bG as ne,n as I,p as re,b as ie,O as ue,bH as ce,aB as ve,a4 as me,U as fe,l as de,aJ as he}from"./75bbe58a.js";const Q=Symbol("scrollbarContextKey"),be={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},pe=({move:e,size:a,bar:v})=>({[v.size]:a,transform:`translate${v.axis}(${e}%)`}),ye=A({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),K="Thumb",ge=X({name:K,props:ye,setup(e){const a=Z(Q),v=V("scrollbar");a||_(K,"can not inject scrollbar context");const n=r(),c=r(),i=r({}),l=r(!1);let m=!1,d=!1,h=ee?document.onselectstart:null;const s=B(()=>be[e.vertical?"vertical":"horizontal"]),P=B(()=>pe({size:e.size,move:e.move,bar:s.value})),z=B(()=>n.value[s.value.offset]**2/a.wrapElement[s.value.scrollSize]/e.ratio/c.value[s.value.offset]),H=o=>{var t;if(o.stopPropagation(),o.ctrlKey||[1,2].includes(o.button))return;(t=window.getSelection())==null||t.removeAllRanges(),b(o);const u=o.currentTarget;!u||(i.value[s.value.axis]=u[s.value.offset]-(o[s.value.client]-u.getBoundingClientRect()[s.value.direction]))},$=o=>{if(!c.value||!n.value||!a.wrapElement)return;const t=Math.abs(o.target.getBoundingClientRect()[s.value.direction]-o[s.value.client]),u=c.value[s.value.offset]/2,f=(t-u)*100*z.value/n.value[s.value.offset];a.wrapElement[s.value.scroll]=f*a.wrapElement[s.value.scrollSize]/100},b=o=>{o.stopImmediatePropagation(),m=!0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",y),h=document.onselectstart,document.onselectstart=()=>!1},k=o=>{if(!n.value||!c.value||m===!1)return;const t=i.value[s.value.axis];if(!t)return;const u=(n.value.getBoundingClientRect()[s.value.direction]-o[s.value.client])*-1,f=c.value[s.value.offset]-t,g=(u-f)*100*z.value/n.value[s.value.offset];a.wrapElement[s.value.scroll]=g*a.wrapElement[s.value.scrollSize]/100},y=()=>{m=!1,i.value[s.value.axis]=0,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",y),E(),d&&(l.value=!1)},L=()=>{d=!1,l.value=!!e.size},N=()=>{d=!0,l.value=m};x(()=>{E(),document.removeEventListener("mouseup",y)});const E=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return R(j(a,"scrollbarElement"),"mousemove",L),R(j(a,"scrollbarElement"),"mouseleave",N),{ns:v,instance:n,thumb:c,bar:s,thumbStyle:P,visible:l,clickTrackHandler:$,clickThumbHandler:H}}});function we(e,a,v,n,c,i){return w(),W(ae,{name:e.ns.b("fade")},{default:q(()=>[te(M("div",{ref:"instance",class:S([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:a[1]||(a[1]=(...l)=>e.clickTrackHandler&&e.clickTrackHandler(...l))},[M("div",{ref:"thumb",class:S(e.ns.e("thumb")),style:O(e.thumbStyle),onMousedown:a[0]||(a[0]=(...l)=>e.clickThumbHandler&&e.clickThumbHandler(...l))},null,38)],34),[[le,e.always||e.visible]])]),_:1},8,["name"])}var Se=Y(ge,[["render",we],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const ze=A({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),He=X({components:{Thumb:Se},props:ze,setup(e){const a=r(0),v=r(0),n=4;return{handleScroll:i=>{if(i){const l=i.offsetHeight-n,m=i.offsetWidth-n;v.value=i.scrollTop*100/l*e.ratioY,a.value=i.scrollLeft*100/m*e.ratioX}},moveX:a,moveY:v}}});function $e(e,a,v,n,c,i){const l=F("thumb");return w(),J(se,null,[D(l,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),D(l,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var ke=Y(He,[["render",$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ee=A({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:oe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),Te={scroll:({scrollTop:e,scrollLeft:a})=>p(e)&&p(a)},Ce=X({name:"ElScrollbar",components:{Bar:ke},props:Ee,emits:Te,setup(e,{emit:a}){const v=V("scrollbar");let n,c;const i=r(),l=r(),m=r(),d=r("0"),h=r("0"),s=r(),P=r(0),z=r(0),H=r(1),$=r(1),b=4,k=B(()=>{const t={};return e.height&&(t.height=U(e.height)),e.maxHeight&&(t.maxHeight=U(e.maxHeight)),[e.wrapStyle,t]}),y=()=>{var t;l.value&&((t=s.value)==null||t.handleScroll(l.value),a("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function L(t,u){ve(t)?l.value.scrollTo(t):p(t)&&p(u)&&l.value.scrollTo(t,u)}const N=t=>{!p(t)||(l.value.scrollTop=t)},E=t=>{!p(t)||(l.value.scrollLeft=t)},o=()=>{if(!l.value)return;const t=l.value.offsetHeight-b,u=l.value.offsetWidth-b,f=t**2/l.value.scrollHeight,g=u**2/l.value.scrollWidth,T=Math.max(f,e.minSize),C=Math.max(g,e.minSize);H.value=f/(t-f)/(T/(t-T)),$.value=g/(u-g)/(C/(u-C)),h.value=T+b<t?`${T}px`:"",d.value=C+b<u?`${C}px`:""};return G(()=>e.noresize,t=>{t?(n==null||n(),c==null||c()):({stop:n}=ne(m,o),c=R("resize",o))},{immediate:!0}),G(()=>[e.maxHeight,e.height],()=>{e.native||I(()=>{var t;o(),l.value&&((t=s.value)==null||t.handleScroll(l.value))})}),re(Q,ie({scrollbarElement:i,wrapElement:l})),ue(()=>{e.native||I(()=>o())}),ce(()=>o()),{ns:v,scrollbar$:i,wrap$:l,resize$:m,barRef:s,moveX:P,moveY:z,ratioX:$,ratioY:H,sizeWidth:d,sizeHeight:h,style:k,update:o,handleScroll:y,scrollTo:L,setScrollTop:N,setScrollLeft:E}}});function Be(e,a,v,n,c,i){const l=F("bar");return w(),J("div",{ref:"scrollbar$",class:S(e.ns.b())},[M("div",{ref:"wrap$",class:S([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:O(e.style),onScroll:a[0]||(a[0]=(...m)=>e.handleScroll&&e.handleScroll(...m))},[(w(),W(fe(e.tag),{ref:"resize$",class:S([e.ns.e("view"),e.viewClass]),style:O(e.viewStyle)},{default:q(()=>[me(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?de("v-if",!0):(w(),W(l,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Pe=Y(Ce,[["render",Be],["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ne=he(Pe);export{Ne as E};
