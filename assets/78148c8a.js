import{d as M,E as ce,o as s,f as n,g as o,e as y,_ as $,r,a4 as G,ad as Y,W as C,a8 as I,H as k,j as u,I as b,l as D,b7 as Z,t as E,aa as N,bm as de,a as pe,O as re,a2 as W,k as R,a3 as ue,a5 as ee,c as B,U as _e,G as Q,J as ve,K as me,bC as fe,F as ge}from"./75bbe58a.js";import{G as ye,H as he,W as be,K as Ae,L as we,M as Ee,n as xe,i as V,J as Ce,S as U,d as q,N as Se}from"./index.js";import{U as De}from"./4050ce41.js";import{A as P}from"./bafbb655.js";import"./ee1213a1.js";import"./3f4c5204.js";import"./04ee1aa4.js";import"./ceaf704c.js";import"./8e76c846.js";const Fe=M({name:"Rank"}),Ie={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ke=o("path",{fill:"currentColor",d:"m186.496 544 41.408 41.344a32 32 0 1 1-45.248 45.312l-96-96a32 32 0 0 1 0-45.312l96-96a32 32 0 1 1 45.248 45.312L186.496 480h290.816V186.432l-41.472 41.472a32 32 0 1 1-45.248-45.184l96-96.128a32 32 0 0 1 45.312 0l96 96.064a32 32 0 0 1-45.248 45.184l-41.344-41.28V480H832l-41.344-41.344a32 32 0 0 1 45.248-45.312l96 96a32 32 0 0 1 0 45.312l-96 96a32 32 0 0 1-45.248-45.312L832 544H541.312v293.44l41.344-41.28a32 32 0 1 1 45.248 45.248l-96 96a32 32 0 0 1-45.312 0l-96-96a32 32 0 1 1 45.312-45.248l41.408 41.408V544H186.496z"},null,-1),$e=[ke];function Le(t,l,a,e,x,h){return s(),n("svg",Ie,$e)}var Be=ce(Fe,[["render",Le]]);const Oe=M({name:"EtabSwiper",components:{ArrowLeft:ye,ArrowRight:he},props:{appList:{type:Array,default:[]}},setup(t){const l=y(0);return{activeIndex:l,onNext:e=>{e=="right"?l.value+1<t.appList.length?l.value++:l.value=0:l.value>0&&l.value--}}}}),Te={class:"swiper-warp"},Me={class:"swiper-pagination flex-cc"},Ne={key:0,class:"swiper-action"},ze={class:"bt"},je={class:"bt"};function Re(t,l,a,e,x,h){const _=r("ArrowLeft"),v=r("el-icon"),f=r("ArrowRight");return s(),n("div",Te,[o("div",{class:"swiper-wrapper",style:Y({transform:`translate3d(-${t.activeIndex*100}%, 0px, 0px)`})},[G(t.$slots,"default",{},void 0,!0)],4),o("div",Me,[(s(!0),n(C,null,I(t.appList,(c,g)=>(s(),n("div",{class:k(["swiper-pagination-bullet qq",{"swiper-pagination-bullet-active":t.activeIndex==g}]),key:g},null,2))),128))]),t.appList.length>1?(s(),n("div",Ne,[o("span",ze,[u(v,{onClick:l[0]||(l[0]=c=>t.onNext("left")),size:20},{default:b(()=>[u(_)]),_:1})]),o("span",je,[u(v,{onClick:l[1]||(l[1]=c=>t.onNext("right")),size:20},{default:b(()=>[u(f)]),_:1})])])):D("",!0)])}var Ve=$(Oe,[["render",Re],["__scopeId","data-v-abd94472"]]);const Ue=M({name:"EtabSwiperItem",props:{index:{type:Number,default:0}}}),We={class:"swiper-slide"};function Ge(t,l,a,e,x,h){return s(),n("div",We,[G(t.$slots,"default",{},void 0,!0)])}var He=$(Ue,[["render",Ge],["__scopeId","data-v-e4a9f280"]]);const Ke={name:"Apply",props:{item:{type:Object,default:()=>({icon:null,name:null,url:null,desc:null,downloadTotal:null})}},components:{Loading:Z}},Je={class:"apply-item flex"},Qe={class:"apply-item_left"},qe={class:"image-loading tx-c"},Pe={class:"apply-item_right flex1"},Xe={class:"p hd"},Ye={class:"p md color-msg f-12"},Ze={class:"flex-end"},et={class:"flex-c color-msg"},tt={class:"ml-10 f-12"},st=N(" \u{1F525}"),at={class:"ml-10"},ot=N(" Add To ");function nt(t,l,a,e,x,h){const _=r("Loading"),v=r("el-icon"),f=r("el-image"),c=r("EtabBt");return s(),n("div",Je,[o("div",Qe,[u(f,{lazy:"","preview-teleported":"",class:"pic","preview-src-list":[a.item.icon],src:a.item.icon},{placeholder:b(()=>[o("div",qe,[u(v,null,{default:b(()=>[u(_,{class:"e-spin"})]),_:1})])]),_:1},8,["preview-src-list","src"])]),o("div",Pe,[o("div",Xe,E(a.item.name),1),o("div",Ye,E(a.item.desc),1),o("div",Ze,[o("div",et,[o("span",tt,[st,o("span",at,E(a.item.downloadTotal),1)])]),u(c,{class:"add-bt ml-20",type:"primary"},{default:b(()=>[ot]),_:1})])])])}var lt=$(Ke,[["render",nt],["__scopeId","data-v-46b308ee"]]);const it={name:"Apply",props:{index:{type:Number,default:0},app:{type:Object,default:()=>({downloadTotal:0,isAdd:!1})}},setup(t,l){return{onAdd:()=>{l.emit("onAdd",t.index)}}}},ct={class:"apply-item flex"},dt={class:"apply-item_left"},pt={class:"apply-item_right flex1"},rt={class:"flex-c color-msg row- row-3"},ut={class:"flex-c flex-end mt-10"},_t={class:"ml-10 f-12"};function vt(t,l,a,e,x,h){const _=r("EtabBt");return s(),n("div",ct,[o("div",dt,[G(t.$slots,"default",{},void 0,!0)]),o("div",pt,[o("div",rt,E(a.app.desc),1),o("div",ut,[o("span",_t," \u{1F525}"+E(a.app.downloadTotal||"-"),1),u(_,{class:"add-bt ml-20",type:"primary",text:"",onOnClick:e.onAdd,disabled:a.app.isAdd},{default:b(()=>[N(E(a.app.isAdd?"Uninstall":"Add To"),1)]),_:1},8,["onOnClick","disabled"])])])])}var mt=$(it,[["render",vt],["__scopeId","data-v-6587d339"]]);const X={id:null,title:null,type:null,mens:null},ft={name:"AppStores",components:{...be,UserApp:De,Loading:Z,Rank:Be,Download:Ae,Apply:mt,Software:lt,EtabSwiper:Ve,EtabSwiperItem:He,ElInput:de},directives:{ElInfiniteScroll:we},setup(){const t={},l=y({lables:[]}),a=y([]),e=y([]),x=y(!1),h=y(!1),_=y(!1),v=y({...X}),f=y({...X}),{tableData:c,pageConfig:g}=Ee(),O=y(0),L=y(null),T=y(""),z=pe(()=>c.loading||h.value),d=xe(),m={W:"Widget",U:"UserApp"},S=()=>{window.open("https://f.wps.cn/g/XDROOqTb","_target")},j=i=>{v.value=e.value[i],F()},H=i=>{e.value=c.list[i].mens,f.value=c.list[i],v.value={...e.value[0]},O.value=i,_.value=!1,a.value=[],F()},te=()=>{_.value=!1,a.value=[],F()},se=async()=>{const i=await V.getAppIcons(),p={};return i.forEach(A=>{A.list.forEach(w=>{w.data&&w.data.code&&(p[w.data.code]=!0)})}),p},ae=async i=>{const p=await V.getAppIcons(),A=await P(p,Ce(a.value[i]),d.$state.appGroupId,"app");a.value[i].isAdd=A},oe=async i=>{const p=await V.getAppIcons(),A=a.value[i],w=await P(p,A,d.$state.appGroupId,"add");a.value[i].isAdd=w,t[A.id]||(U.onInstall({id:A.id}),t[A.id]=!0)},ne=i=>i.map(p=>(p.mens||(p.mens={comName:"",sizes:[]}),p.mens.sizes.reverse(),p)),K=async()=>{try{if(c.loading)return;c.loading=!0;const p=(await U.getIcons({appName:T.value,appType:v.value.id,pageIndex:g.pageIndex-1,pageSize:g.pageSize})).data||[],A=await se();p.forEach(w=>{w.isAdd=A[w.code]||!1,w.downloadTotal=w.downloadTotal||0}),a.value=a.value.concat(p),c.loading=!1,p.length<g.pageSize&&(h.value=!0),g.pageIndex===1&&L.value.scrollTo({top:0}),c.isEnd=p.length<g.pageSize}catch{c.loading=!1,_.value=!0,h.value=!0}},F=async()=>{g.pageIndex=1,h.value=!1,f.value.type===m.W?(c.loading=!0,a.value=ne([...Se]),L.value.scrollTo({top:0}),c.loading=!1):(a.value=[],K())},le=()=>{!h.value&&!c.loading&&f.value.type==="Apply"&&(g.pageIndex++,K())},J=i=>{c.list=i||[],e.value=[...i[0].mens||[]],v.value={...e.value[0]},f.value={...c.list[0]}},ie=()=>{g.pageSize=20,c.loading=!0,U.getAppTypes({}).then(i=>{J(i),F(),q.setAppStore(Q.AppTypes,i)}).catch(async()=>{const i=await q.getAppStore(Q.AppTypes);if(Array.isArray(i)){const p=i;c.list=p,J(p),F()}}).finally(()=>{c.loading=!1})};return re(()=>{ie()}),{onChangeMen:j,onLoad:le,onChangeTab:H,onAddIcon:oe,onAddApp:ae,onInputChange:te,disabledScroll:z,clickLoading:x,tableData:c,onQuery:F,appName:T,from:l,isError:_,menObj:v,tabObj:f,menList:e,appList:a,tableIndex:O,appsDom:L,onOpen:S}}},gt=t=>(ve("data-v-568fb96e"),t=t(),me(),t),yt={class:"app-store flex"},ht=["onClick"],bt={class:"post-app"},At=N("Submit Application "),wt={class:"flex1"},Et={key:0,class:"app-store_tabs flex-c"},xt={class:"flex1"},Ct=["onClick"],St=["infinite-scroll-disabled"],Dt={key:1,class:"flex-cc null-tx"},Ft={key:2,class:"flex-cc null-tx"},It={key:3,class:"flex-cc null-tx"},kt=["onClick"],$t={class:"app-doc"},Lt={class:"app-desc row- row-2"},Bt=gt(()=>o("div",{class:"flex-cc null-tx"},"\u{1F9B8}‍♂️In The Endo(*￣▽￣*)ブ",-1));function Ot(t,l,a,e,x,h){const _=r("EtabBt"),v=r("el-input"),f=r("EtabAppMin"),c=r("Apply"),g=r("EtabSwiperItem"),O=r("EtabSwiper"),L=r("UserApp"),T=W("loading"),z=W("el-infinite-scroll");return s(),n("section",yt,[o("div",{class:"tx-c app-store_mens",style:Y({"--target-top":e.tableIndex*40})},[(s(!0),n(C,null,I(e.tableData.list,(d,m)=>(s(),n("div",{key:m,class:k(["men hover pointer",{select:d.type===e.tabObj.type}]),onClick:R(S=>e.onChangeTab(m),["stop"])},E(d.title),11,ht))),128)),o("div",bt,[u(_,{type:"",onOnClick:e.onOpen,class:"hover"},{default:b(()=>[At]),_:1},8,["onOnClick"])])],4),o("div",wt,[e.menList.length>1?(s(),n("div",Et,[o("div",xt,[(s(!0),n(C,null,I(e.menList,(d,m)=>(s(),n("div",{key:m,class:k(["tab",{select:d.id===e.menObj.id}]),onClick:S=>e.onChangeMen(m)},E(d.title),11,Ct))),128))]),u(v,{class:"border-input",style:{width:"160px"},placeholder:"Search Keyword",clearable:"",modelValue:e.appName,"onUpdate:modelValue":l[0]||(l[0]=d=>e.appName=d),onClear:e.onInputChange,onKeyup:ue(e.onInputChange,["enter"])},null,8,["modelValue","onClear","onKeyup"])])):D("",!0),ee((s(),n("div",{class:"app-store_apps",ref:"appsDom","infinite-scroll-disabled":e.disabledScroll,"infinite-scroll-distance":100},[e.tabObj.type==="Apply"?(s(),n(C,{key:0},[o("div",{class:k(["app-items",["apps-type-"+e.tabObj.type]])},[(s(!0),n(C,null,I(e.appList,(d,m)=>(s(),n("div",{key:m,class:"app-item"},[u(c,{app:d,index:m,onOnAdd:e.onAddIcon},{default:b(()=>[u(f,{class:"pic",app:d,type:"store"},null,8,["app"])]),_:2},1032,["app","index","onOnAdd"])]))),128))],2),e.isError?(s(),n("div",{key:0,class:"flex-cc null-tx error",onClick:l[1]||(l[1]=R((...d)=>e.onQuery&&e.onQuery(...d),["stop"]))}," Make A Mistake,Refresh(*￣▽￣*)ブ' ")):!e.tableData.loading&&e.tableData.list.length<1?(s(),n("div",Dt," \u{1F9B8}‍♂️Used Data Duck，Rewriting(*￣▽￣*)ブ ")):e.tableData.loading?(s(),n("div",Ft,"'\u{1F9B8}‍♂️Strive To Load'")):e.tableData.isEnd?(s(),n("div",It,"'\u{1F9B8}‍♂️In The Endo(*￣▽￣*)ブ'")):D("",!0)],64)):D("",!0),e.tabObj.type==="Widget"?(s(),n(C,{key:1},[o("div",{class:k(["app-items",["apps-type-"+e.tabObj.type]])},[e.appList.length>0?(s(!0),n(C,{key:0},I(e.appList,(d,m)=>(s(),n("div",{key:m,class:"app-item app-item-widget"},[u(O,{appList:d.mens.sizes},{default:b(()=>[(s(!0),n(C,null,I(d.mens.sizes,(S,j)=>(s(),B(g,{key:m+"_"+j},{default:b(()=>[o("div",{class:k([["app-size-grid-"+S.class,"app-size-"+S.class],"etab-app-item"])},[(s(),B(_e(d.name+S.value),{app:d.data},null,8,["app"])),o("div",{class:"add-bt flex-cc",onClick:R(H=>e.onAddApp(m),["stop"])},E(d.isAdd?"-":"+"),9,kt)],2)]),_:2},1024))),128))]),_:2},1032,["appList"]),o("div",$t,[o("div",Lt,E(d.data?d.data.desc:""),1)])]))),128)):D("",!0)],2),Bt],64)):D("",!0),e.tabObj.type==="UserApp"?(s(),B(L,{key:2,width:570})):D("",!0)],8,St)),[[T,e.tableData.loading],[z,e.onLoad]])])])}var Tt=$(ft,[["render",Ot],["__scopeId","data-v-568fb96e"]]);const Mt=M({name:"Modal",components:{AppStores:Tt},setup(){const t=y(!1);return{onClose:()=>{window.appStorage.emit(ge.onClose)},onComResolve:()=>{t.value=!1},loading:t}}}),Nt={class:"app-store_warp"};function zt(t,l,a,e,x,h){const _=r("AppStores"),v=r("EtabModel"),f=W("loading");return s(),B(v,{title:"\u{1F453}Application Market",width:"1024px",modelValue:!0,onClosed:t.onClose,customClass:"app-stores"},{default:b(()=>[ee((s(),n("section",Nt,[(s(),B(fe,{onResolve:t.onComResolve},{default:b(()=>[u(_)]),_:1},8,["onResolve"]))])),[[f,t.loading]])]),_:1},8,["onClosed"])}var Qt=$(Mt,[["render",zt]]);export{Qt as default};
