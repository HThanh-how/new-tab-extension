import{_ as Q,b7 as W,bm as K,e as v,a as R,O as X,r as C,a2 as Y,o as n,f as u,g as a,H as S,k as f,ad as Z,a5 as x,W as T,a8 as D,t as P,j as l,I as g,c as A,l as U,P as L,bT as $,aa as j,J as ee,K as ae}from"./75bbe58a.js";import{G as te,a2 as se,b as oe,n as ie,a7 as ne,d as M,S as le}from"./index.js";import{s as ce}from"./d5b42a38.js";const ue=[{id:"windows",title:"Windows\u58C1\u7EB8",type:"men",pic:"/static/images/images/windows.jpg"},{id:"mac",title:"Mac\u58C1\u7EB8",type:"men",pic:"/static/images/images/mac.jpg"},{id:"ziran",title:"\u81EA\u7136",type:"men",pic:"/static/images/images/ziran.jpg"},{id:"keji",title:"\u79D1\u6280",type:"men",pic:"/static/images/images/keji.jpg"},{id:"shenghuo",title:"\u751F\u6D3B",type:"men",pic:"/static/images/images/shenghuo.jpg"},{id:"jianzhu",title:"\u5EFA\u7B51",type:"men",pic:"/static/images/images/jianzhu.jpg"},{id:"xingkong",title:"\u661F\u7A7A",type:"men",pic:"/static/images/images/xingkong.jpg"},{id:"dongman",title:"\u52A8\u6F2B",type:"men",pic:"/static/images/images/dongman.jpg"}];const de={name:"AppImages",components:{Loading:W,ArrowLeft:te,ElInput:K,ESelect:ce},setup(){const{onSaveTheme:h,theme:c}=se(),V=oe(),e=ie(),r=v({backgroundImg:"",backgroundImgId:""}),s=v({from:"top",type:null,lable:null,title:null}),m=v([]),b=v([...ue]),_=v([]),k=v(""),p=v(!1),F=v(!1),w=v(0),E=R(()=>s.value.type!==null),t=i=>i>24*60*60*1e3,d=i=>{F.value=!0;let o={};s.value.from==="animate"?(k.value=_.value[i].id,o=_.value[i]):(k.value=m.value[i].id,o=m.value[i]);const y=setTimeout(()=>{r.value.backgroundImg=o.thumb?o.thumb:o.url,r.value.backgroundImgId=o.id,r.value.backgroundVide=o.thumb?o.url:"",h(r.value),F.value=!1,clearTimeout(y)},1e3)},B=async i=>{try{p.value=!0;const o=ne.bgHash+"-"+s.value.from+"-"+s.value.type,y=await M.getAppStore(o);if(y&&y.data&&t(y.updateTime)){i==="imageList"?m.value=y.data:_.value=y.data,p.value=!1;return}const I=await le.getPics({from:s.value.from||"",type:s.value.type||"",lable:s.value.lable||""});i==="imageList"?m.value=I.data:_.value=I.data,p.value=!1,I.data&&I.data.length>0&&await M.setAppStore(o,{data:I.data,updateTime:new Date().getTime()})}catch(o){p.value=!1,L.error(o)}},O=()=>{B("imageList")},q=()=>{B("tabList2")},G=(i,o)=>{s.value.type=i.id,s.value.from==="top"?(s.value.title=i.title,O()):s.value.from==="animate"?d(o):s.value.title=null},N=(i,o)=>{s.value.from=o,w.value=i,s.value.from==="animate"&&(s.value.title=null,q())},H=async()=>{try{if(!V.$state.userInfo.token)return L.error("\u767B\u5F55\u5DF2\u5931\u6548!"),e.setLogin(!0),!1;r.value.backgroundImgId=$(),h(r.value),p.value=!1,L.success("\u66F4\u65B0\u6210\u529F")}catch(i){p.value=!1,L.error(i)}return!1},J=()=>{window.open("https://pics.sunbangyan.cn/?from=eTab","_target")};return X(()=>{k.value=r.value.backgroundImgId||"",r.value={...c.value}}),{onTabGroup:G,onChanTab:N,onChangePic:d,isShowTabImages:E,theme:c,taIndex:w,clickLoading:F,loading:p,picId:k,tabList:b,tabList2:_,imageList:m,where:s,onSave:H,qfrom:r,onOpen:J}}},z=h=>(ee("data-v-4d672dd0"),h=h(),ae(),h),re={class:"app-images-warp"},me={class:"app-tabs"},pe={class:"bars flex flex-between"},ge={class:"warp"},_e={class:"groups flex"},ve=["onClick"],fe=["src"],he={class:"title flex-cc"},be={class:"warp"},ke={class:"groups flex"},ye={class:"pic"},Ce={class:"image-loading tx-c"},Ee=["onClick"],Fe={class:"image-select-btn flex-c"},Be={class:"warp add-warp"},Ie={class:"upload-form"},we=z(()=>a("div",{class:"mb-10 title"},"\u4F7F\u7528\u672C\u5730\u58C1\u7EB8",-1)),xe={class:"add-image mt-10 mb-10"},Ae=z(()=>a("div",{style:{height:"100%"},class:"flex-cc"},"\u6682\u65E0\u56FE\u7247",-1)),Le={class:"pic-alt mb-10"},Se=j(" \u5F53\u524D\u5185\u6D4B\u9636\u6BB5\uFF0C\u6682\u4E0D\u652F\u6301\u81EA\u5B9A\u4E49\u4E0A\u4F20\u56FE\u7247\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u514D\u8D39\u7684\u7B2C\u4E09\u65B9\u5E73\u53F0\u4E0A\u4F20\u58C1\u7EB8\uFF0C\u7136\u540E\u590D\u5236\u58C1\u7EB8Url\u7684\u65B9\u5F0F\u8BBE\u7F6E\u{1F447} "),Te=j("\u53BB\u4E0A\u4F20"),De={class:"flex-cc mt-10"},je=j("\u4FDD\u5B58"),ze={key:0,class:"tab-images"},Ve={class:"bars flex-cc"},Pe=z(()=>a("span",{class:"ml-10"},"\u8FD4\u56DE",-1)),Ue={class:"title"},Me={class:"items"},Oe={class:"pic"},qe={class:"image-loading tx-c"},Ge=["onClick"],Ne={class:"image-select-btn flex-c"},He={key:0,style:{"text-align":"center"}};function Je(h,c,V,e,r,s){const m=C("Loading"),b=C("el-icon"),_=C("el-image"),k=C("ESelect"),p=C("EtabBt"),F=C("el-input"),w=C("ArrowLeft"),E=Y("loading");return n(),u("section",re,[a("div",me,[a("div",pe,[a("div",{class:S(["bar",[e.taIndex===0?"bar-s":""]]),onClick:c[0]||(c[0]=f(t=>e.onChanTab(0,"top"),["stop"]))}," \u7CBE\u9009\u58C1\u7EB8 ",2),a("div",{class:S(["bar",[e.taIndex===1?"bar-s":""]]),onClick:c[1]||(c[1]=f(t=>e.onChanTab(1,"animate"),["stop"]))}," \u52A8\u6001\u58C1\u7EB8 ",2),a("div",{class:S(["bar",[e.taIndex===2?"bar-s":""]]),onClick:c[2]||(c[2]=f(t=>e.onChanTab(2,""),["stop"]))}," \u81EA\u5B9A\u4E49\u58C1\u7EB8 ",2)]),a("div",{class:"tabs",style:Z({transform:`translate3d(-${e.taIndex*490}px, 0px, 0px)`})},[x((n(),u("div",ge,[a("div",_e,[(n(!0),u(T,null,D(e.tabList,(t,d)=>(n(),u("div",{key:d,class:"group",onClick:f(B=>e.onTabGroup(t,d),["stop"])},[a("img",{class:"img",src:t.pic,alt:""},null,8,fe),a("div",he,[a("span",null,P(t.title),1)])],8,ve))),128))])])),[[E,e.loading]]),x((n(),u("div",be,[a("div",ke,[(n(!0),u(T,null,D(e.tabList2,(t,d)=>(n(),u("div",{key:d,class:"item group"},[a("div",ye,[l(_,{lazy:"",class:"pic-image",src:t?t.thumb:""},{placeholder:g(()=>[a("div",Ce,[l(b,null,{default:g(()=>[l(m,{class:"e-spin"})]),_:1})])]),_:2},1032,["src"]),a("div",{class:"image-select",onClick:f(B=>e.onChangePic(d),["stop"])},[a("div",Fe,[l(b,null,{default:g(()=>[e.clickLoading&&t&&t.id===e.picId?(n(),A(m,{key:0,class:"e-spin"})):(n(),A(k,{key:1}))]),_:2},1024)])],8,Ee)])]))),128))])])),[[E,e.loading]]),x((n(),u("div",Be,[a("div",Ie,[we,a("div",xe,[l(_,{src:e.qfrom.backgroundImg},{placeholder:g(()=>[Ae]),_:1},8,["src"])]),a("div",Le,[Se,l(p,{text:"",onClick:f(e.onOpen,["stop"])},{default:g(()=>[Te]),_:1},8,["onClick"])]),a("div",De,[l(F,{type:"input",placeholder:"\u58C1\u7EB8Url",clearable:"",modelValue:e.qfrom.backgroundImg,"onUpdate:modelValue":c[3]||(c[3]=t=>e.qfrom.backgroundImg=t)},null,8,["modelValue"]),l(p,{class:"mt-10 etab-button-bt",type:"primary",onClick:f(e.onSave,["stop"])},{default:g(()=>[je]),_:1},8,["onClick"])])])])),[[E,e.loading]])],4)]),e.isShowTabImages?x((n(),u("div",ze,[a("div",Ve,[a("div",{class:"back flex-c flex1 pointer",onClick:c[4]||(c[4]=f(t=>e.where.type=null,["stop"]))},[l(b,{size:22},{default:g(()=>[l(w)]),_:1}),Pe]),a("div",Ue,P(e.where.title),1)]),a("div",Me,[(n(!0),u(T,null,D(e.imageList,(t,d)=>(n(),u("div",{key:d,class:"item item2 pointer"},[a("div",Oe,[l(_,{lazy:"",class:"pic-image",src:t?t.url:""},{placeholder:g(()=>[a("div",qe,[l(b,null,{default:g(()=>[l(m,{class:"e-spin"})]),_:1})])]),_:2},1032,["src"]),a("div",{class:"image-select",onClick:f(B=>e.onChangePic(d),["stop"])},[a("div",Ne,[l(b,null,{default:g(()=>[e.clickLoading&&t&&t.id===e.picId?(n(),A(m,{key:0,class:"e-spin"})):(n(),A(k,{key:1}))]),_:2},1024)])],8,Ge)])]))),128)),e.loading?U("",!0):(n(),u("p",He,"\u6CA1\u6709\u66F4\u591A\u4E86"))])])),[[E,e.loading]]):U("",!0)])}var Re=Q(de,[["render",Je],["__scopeId","data-v-4d672dd0"]]);export{Re as default};
